{% extends "base.html" %}

{% block title %}æœç´¢{% if query %}: {{ query }}{% endif %} - arXiv è®ºæ–‡æµè§ˆå™¨{% endblock %}

{% block content %}
<section class="search-page">
    <h1>ğŸ” æœç´¢è®ºæ–‡</h1>
    
    <form action="{{ url_for('search') }}" method="get" class="search-form-large">
        <input type="text" name="q" value="{{ query }}" placeholder="è¾“å…¥å…³é”®è¯..." 
               class="search-input-large" autofocus>
        <select name="category" class="category-select">
            <option value="cs" {% if category == 'cs' %}selected{% endif %}>å…¨éƒ¨ CS</option>
            {% for cat_id, cat_name in categories.items() %}
            <option value="{{ cat_id }}" {% if category == cat_id %}selected{% endif %}>
                {{ cat_id }} - {{ cat_name }}
            </option>
            {% endfor %}
        </select>
        <button type="submit" class="btn btn-primary btn-lg">æœç´¢</button>
    </form>
    
    {% if query %}
    <p class="search-info">
        åœ¨ <strong>{{ category }}</strong> ä¸­æœç´¢ "<strong>{{ query }}</strong>"ï¼Œ
        æ‰¾åˆ° {{ papers | length }} ç¯‡è®ºæ–‡
    </p>
    
    {% if papers %}
    <div class="paper-list">
        {% for paper in papers %}
        <article class="paper-card">
            <div class="paper-header">
                <a href="{{ url_for('paper', paper_id=paper.arxiv_id) }}" class="paper-title">
                    {{ paper.title }}
                </a>
                <div class="paper-meta">
                    <span class="paper-date">{{ paper.published | format_date_short }}</span>
                    <span class="paper-category">{{ paper.primary_category }}</span>
                </div>
            </div>
            <p class="paper-authors">
                {% for author in paper.authors[:5] %}
                {{ author }}{% if not loop.last %}, {% endif %}
                {% endfor %}
                {% if paper.authors | length > 5 %}ç­‰{% endif %}
            </p>
            <p class="paper-summary">{{ paper.summary | truncate_text(200) }}</p>
            <div class="paper-actions">
                <a href="{{ paper.pdf_url }}" target="_blank" rel="noopener" class="btn btn-sm btn-primary">PDF</a>
                <a href="{{ paper.abs_url }}" target="_blank" rel="noopener" class="btn btn-sm btn-secondary">arXiv</a>
                <a href="{{ url_for('paper', paper_id=paper.arxiv_id) }}" class="btn btn-sm btn-outline">è¯¦æƒ…</a>
            </div>
        </article>
        {% endfor %}
    </div>
    
    <div class="pagination">
        {% if page > 1 %}
        <a href="?q={{ query }}&category={{ category }}&page={{ page - 1 }}" class="btn btn-secondary">
            â¬…ï¸ ä¸Šä¸€é¡µ
        </a>
        {% endif %}
        <span class="page-info">ç¬¬ {{ page }} é¡µ</span>
        {% if papers | length >= 20 %}
        <a href="?q={{ query }}&category={{ category }}&page={{ page + 1 }}" class="btn btn-secondary">
            ä¸‹ä¸€é¡µ â¡ï¸
        </a>
        {% endif %}
    </div>
    {% else %}
    <div class="empty-state">
        <p>ğŸ˜” æœªæ‰¾åˆ°åŒ¹é…çš„è®ºæ–‡</p>
        <p class="hint">å°è¯•ä½¿ç”¨å…¶ä»–å…³é”®è¯æˆ–æ›´æ”¹åˆ†ç±»</p>
    </div>
    {% endif %}
    {% else %}
    <div class="search-hints">
        <h3>ğŸ’¡ æœç´¢æç¤º</h3>
        <ul>
            <li>ä½¿ç”¨è‹±æ–‡å…³é”®è¯è·å¾—æ›´å¥½çš„æœç´¢ç»“æœ</li>
            <li>å¯ä»¥æœç´¢æ ‡é¢˜ã€æ‘˜è¦ä¸­çš„å…³é”®è¯</li>
            <li>é€‰æ‹©ç‰¹å®šåˆ†ç±»å¯ä»¥ç¼©å°æœç´¢èŒƒå›´</li>
        </ul>
        
        <h3>ğŸ”¥ çƒ­é—¨æœç´¢</h3>
        <div class="hot-searches">
            <a href="?q=transformer" class="hot-tag">Transformer</a>
            <a href="?q=large language model" class="hot-tag">Large Language Model</a>
            <a href="?q=diffusion" class="hot-tag">Diffusion</a>
            <a href="?q=reinforcement learning" class="hot-tag">Reinforcement Learning</a>
            <a href="?q=graph neural network" class="hot-tag">Graph Neural Network</a>
            <a href="?q=attention mechanism" class="hot-tag">Attention</a>
        </div>
    </div>
    {% endif %}
</section>
{% endblock %}

